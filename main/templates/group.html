{% extends "base.html" %}

{% load static %}

{% block head_title %}
{% if title %}{{ title }}{% endif %}
{% endblock %}

{% block navbar %}
{% include 'navbar.html' %}
{% endblock %}

{% block content %}
<div class='col-12 col-md-10 mb-3 mx-auto'>
    <div class='card'>
        <div class='card-body'>
            <p class='card-title'>Group id: {{ group.group_id }}</p>
            <p class='card-title'>Group name: {{ group.group_name }}</p>
            <p class='card-title'>Group admin: {{ group.admin_fk.account_id}}</p>
        </div>
    </div>
</div>

<div class="row justify-content-center">
    {% for member in members %}
    <div class="col col-sm-6 col-lg-3">
        <img class="rounded-circle" src="{% static 'img/test.jpeg' %}" width="180" height="180">
        </img>
        <h2 style="padding-left: 10%;">{{ member.member_fk.first_name }}</h2>
        <p style="padding-left: 10%;">Balance: {{ member.balance }}</p>
        <p style="padding-left: 10%;"><a class="btn btn-secondary" href="#" role="button">View details &raquo;</a></p>
    </div>
    {% endfor %}
</div>

<h3>Group Records:</h3>
{% for record in records %}
<a href="{{ group.group_id }}/{{ record.pk }}">
    <ul class="list-group">
        <li class="list-group-item">
            Title: {{ record.title }}
            </br>
            Cost: {{ record.cost }} Tomans
            </br>
            Added At: {{ record.date_time }}
        </li>
    </ul>
</a>
{% endfor %}

<a class="btn btn-primary" href="{{ account.get_absolute_url }}{{ group.get_absolute_url }}/add-record"
    role="button">Add Record</a>

<br>
<br>

{% if group.admin_fk == account %}
<form method='POST' action='' enctype='multipart/form-data'> {% csrf_token %}
    {{ form.as_p }}
    <button type='submit'>Add Member</button>
</form>
{% endif %}

{% endblock %}